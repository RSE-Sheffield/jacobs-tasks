<!DOCTYPE html>
<html>
  <head>
    <script src="jspsych/jspsych.js"></script>
    <script src="jspsych/plugin-html-keyboard-response.js"></script>
    <script src="jspsych/plugin-canvas-button-response.js"></script>
    <script src="jspsych/plugin-call-function.js"></script>
    <script src="config/expt2_config.js"></script>
    <script src="functions/expt2_func.js"></script>
    <link href="jspsych/jspsych.css" rel="stylesheet" type="text/css" />
  </head>

  <body>
    <canvas id="canvas" width="600" height="600">
    </canvas>

    <script>
        const jsPsych = initJsPsych({
          on_finish: function() {
            const d = new Date();
            var filename = d.toISOString() + "_expt2_testdata.csv"
            jsPsych.data.get().localSave('csv', filename);
          }
        });
      const canvas = document.getElementById("canvas");
      const canvasCentre = [canvas.width/2, canvas.height/2];
      const imgSize = 96;
      const positionArr = [1, 2, 3, 4, 5, 6, 7, 8];
      
      let stimArray;
      let jspShuffle = jsPsych.randomization.shuffle
      let allStims = Array.from({length: 454}, (value, index) => index + 1)
      allStims = jspShuffle(allStims)

        var timeline = [];

      // Standard fixation object
      var fixation = {
        type: jsPsychHtmlKeyboardResponse,
        stimulus: '<div style="font-size:60px;">+</div>',
        choices: "NO_KEYS",
        trial_duration: 1000, //config.fixationDuration,
        data: {
          screen: 'fixation'
        }
      };

      timeline.push(fixation);

      var memory_array = {
        type: jsPsychCanvasButtonResponse,
        stimulus: function(c) {
        },
        canvas_size: [canvas.width, canvas.height],
        choices: [],
      };

      var response_screen = {
        type: jsPsychCanvasButtonResponse,
        stimulus: function(c) {
        },
        canvas_size: [canvas.width, canvas.height],
      };

    </script>

  </body>

</html>